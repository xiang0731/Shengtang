<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
    <title>17ShengTang</title>
    <style>
        #panel-handler #handler_display {
            white-space: pre;
            max-height: 50%;
            overflow: scroll;
        }

        #panel-handler #input {
            resize: none;
            width: 100%;
            overflow: scroll;
        }

        .container {
            /* display: flex; */

            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            width: 80%;
            margin-left: 10%;
        }

        .input-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
            width: 100%;
        }

        textarea {
            margin-bottom: 10px;
            width: 100%;
            resize: both;
            /* 允许用户调整大小 */
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
            width: 100%;
        }

        .history-container {
            width: 100%;
            margin-top: 20px;
        }

        .history-item {
            margin-bottom: 10px;
        }

        #WeaponUpgradeCalculator th,
        #WeaponUpgradeCalculator td {
            text-align: left;
            padding: 5px;
        }

        #WeaponUpgradeCalculator select,
        #WeaponUpgradeCalculator input {
            margin-left: 5px;
        }

        .WeaponUpgradeAlignRight {
            text-align: right;
            padding-right: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1">
                            <span class="sr-only">17ShengTang</span><span class="icon-bar"></span><span
                                class="icon-bar"></span><span class="icon-bar"></span></button>
                        <a class="navbar-brand" href="#panel-home" data-toggle="tab"><i>
                                <font color="red">17</font>ShengTang
                            </i></a>
                    </div>
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">

                            <li>
                                <a href="#WeaponUpgrade" data-toggle="tab">神器升级计算器</a>
                            </li>

                            <li>
                                <a href="#GemsUpgrade" data-toggle="tab">宝石升级计算器</a>
                            </li>
                            <li>
                                <a href="#TBD" data-toggle="tab">开发中</a>
                            </li>



                        </ul>
                    </div>
                </nav>
                <div class="tabbable" id="content">
                    <div class="tab-content">
                        <div class="tab-pane col-12 active" id="panel-home">
                            <br>
                            <br>
                            <h4>数据参考：<a
                                    href="https://xiang0731.github.io/2022/01/01/%E6%B8%B8%E6%88%8F-%E5%9C%A3%E5%A0%82/220101%20%E5%9C%A3%E5%A0%82%E5%90%84%E7%A7%8D%E8%A1%A8%E6%A0%BC/">圣堂各类表格</a>
                            </h4>
                            <br>
                            <br>
                            <p>无法切换请刷新页面</p>
                        </div>

                        <div class="tab-pane col-12 " id="WeaponUpgrade">
                            <h2 id="WeaponUpgradeTitle">神器等级计算器</h2>
                            <p id="WeaponUpgradeRemaining">距离20级神器还差：570个1级神器</p>
                            <table id="WeaponUpgradeCalculator">
                                <!-- 我们将在这里动态生成行 -->
                            </table>
                            <br>
                            <table border="1" style="border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th>神器级数</th>
                                        <th>当前级数能量</th>
                                        <th>进度值</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>2</td>
                                        <td>3</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>5</td>
                                        <td>5</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>10</td>
                                        <td>7</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>17</td>
                                        <td>9</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>26</td>
                                        <td>12</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>38</td>
                                        <td>15</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>53</td>
                                        <td>18</td>
                                    </tr>
                                    <tr>
                                        <td>9</td>
                                        <td>71</td>
                                        <td>21</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>92</td>
                                        <td>24</td>
                                    </tr>
                                    <tr>
                                        <td>11</td>
                                        <td>116</td>
                                        <td>28</td>
                                    </tr>
                                    <tr>
                                        <td>12</td>
                                        <td>144</td>
                                        <td>32</td>
                                    </tr>
                                    <tr>
                                        <td>13</td>
                                        <td>176</td>
                                        <td>36</td>
                                    </tr>
                                    <tr>
                                        <td>14</td>
                                        <td>212</td>
                                        <td>40</td>
                                    </tr>
                                    <tr>
                                        <td>15</td>
                                        <td>252</td>
                                        <td>45</td>
                                    </tr>
                                    <tr>
                                        <td>16</td>
                                        <td>297</td>
                                        <td>52</td>
                                    </tr>
                                    <tr>
                                        <td>17</td>
                                        <td>349</td>
                                        <td>61</td>
                                    </tr>
                                    <tr>
                                        <td>18</td>
                                        <td>410</td>
                                        <td>72</td>
                                    </tr>
                                    <tr>
                                        <td>19</td>
                                        <td>482</td>
                                        <td>88</td>
                                    </tr>
                                    <tr>
                                        <td>20</td>
                                        <td>570</td>
                                        <td>/</td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                        <div class="tab-pane col-12 " id="GemsUpgrade">
                            <h2>等级升级金币计算</h2>
                            初始等级: <input type="number" id="start" min="1" max="15" oninput="calculate()"><br>
                            目标等级: <input type="number" id="end" min="1" max="15" oninput="calculate()"><br>
                            <p id="result"></p>

                            <br>
                            <table border="1" style="border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th>宝石等级</th>
                                        <th>宝石属性</th>
                                        <th>升级消耗金币(万)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>45</td>
                                        <td>5</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>135</td>
                                        <td>10</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>225</td>
                                        <td>20</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>385</td>
                                        <td>40</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>585</td>
                                        <td>300</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>785</td>
                                        <td>600</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>1020</td>
                                        <td>1200</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>1285</td>
                                        <td>1800</td>
                                    </tr>
                                    <tr>
                                        <td>9</td>
                                        <td>1530</td>
                                        <td>2400</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>1800</td>
                                        <td>3000</td>
                                    </tr>
                                    <tr>
                                        <td>11</td>
                                        <td>2250</td>
                                        <td>4000</td>
                                    </tr>
                                    <tr>
                                        <td>12</td>
                                        <td>2925</td>
                                        <td>5000</td>
                                    </tr>
                                    <tr>
                                        <td>13</td>
                                        <td>3825</td>
                                        <td>6000</td>
                                    </tr>
                                    <tr>
                                        <td>14</td>
                                        <td>4950</td>
                                        <td>8000</td>
                                    </tr>
                                    <tr>
                                        <td>15</td>
                                        <td>6400</td>
                                        <td>-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="tab-pane col-12 " id="TBD">等我有时间再折腾折腾...</div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" charset="utf-8" src="js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" charset="UTF-8" src="js/bootstrap.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/z.js"></script>
<script type="text/javascript" charset="utf-8" src="js/randomName.js"></script>
<script type="text/javascript" charset="utf-8">
    ;
    let tmp = null;
    let result = null;

    $(document).ready(function () {
        $('#name_table_refresh').click(function () {
            let target = $('#table-name');
            let language = $('#name_language').val() == "false" ? false : true;
            let gander_m = $('#name_gender').val() == "false" ? false : true;
            let number = $('#name_number').val();
            let result = null;
            if (language) {
                result = z.getRandomNameArrayEnF(number, gander_m);
            } else {
                result = z.getRandomNameArray(number, gander_m);
            }
            let tmp = '';
            for (let i = 0; i < result.length; i++) {
                tmp = tmp.concat('<tr><td>' + result[i][0] + '</td><td>' + result[i][1] + '</td></tr>');
            }
            tmp = ''.concat('<thead><tr><td>Last Name</td><td>First Name</td></tr></thead><tbody>'.concat(tmp).concat(
                '</tbody>'));
            target.html(tmp);
        });
        $('li').click(function () {
            tmp = $('#handler_input').val();
        });
        $('[id*="submit"]').click(function () {
            $('#handler_input').val(result);
        });
        $('[id*="clean"]').click(function () {
            tmp = '';
            result = '';
            $('#handler_input').val('');
        });
        $('[id*="copy"]').click(function () {
            z.string.setClipBoard($('#handler_input'));
        });
        $('[id*="toQueryIdSet"]').click(function () {
            result = z.string.surroundEachRows(tmp, '\'', '\',', false, false);
        });
        $('[id*="toQueryFieldName"]').click(function () {
            result = z.string.replaceForSQL(tmp);
        });
        $('[id*="toTableRow"]').click(function () {
            result = z.string.replaceForTable(tmp);
        });
        $('[id*="toTableColumn"]').click(function () {
            result = z.string.replaceForTable(tmp, 1);
        });
        $('[id*="toSentenceFormate"]').click(function () {
            tmp = tmp.split('\n');
            result = z.string.concatArray(tmp, '\n', false, true, function (str) {
                return z.string.formatSentence(str);
            });
        });
        $('[id*="toLabelFormate"]').click(function () {
            tmp = tmp.split('\n');
            result = z.string.concatArray(tmp, '\n', false, true, function (str) {
                return z.string.formatLabel(str);
            });
        });
        $('[id*="toFieldsName"]').click(function () {
            tmp = tmp.split('\n');
            result = z.string.concatArray(tmp, '\n', false, true, function (str) {
                return z.string.toFieldsName(str);
            });
        });
        $('[id*="toFieldsNameNoSpace"]').click(function () {
            tmp = tmp.split('\n');
            result = z.string.concatArray(tmp, '\n', false, true, function (str) {
                z.string.drop(str, ' ')
            });
        });
        $('[id*="toCustomAPI"]').click(function () {
            tmp = tmp.split('\n');
            z.log(tmp)
            result = z.string.concatArray(tmp, '\n', false, true, function (str) {
                return z.string.toCustomObjecAPIName(str);
            });
            z.log(result)
        });
        $('[id*="toCsvTable"]').click(function () {
            result = z.string.packageTable(tmp);
        })
        $('[id*="toLower"]').click(function () {
            result = tmp.toLocaleLowerCase();
        })
        $('[id*="toUpper"]').click(function () {
            result = tmp.toLocaleUpperCase();
        })
        $('li').click(function () {
            $('#handler_display').html(result);
        });
    });
</script>

<!-- 神器计算 -->
<script>
    // 数据表
    var WeaponUpgradeData = [
        { level: 0, energy: 0, progress: 0 },
        { level: 1, energy: 1, progress: 0 },
        { level: 2, energy: 2, progress: 2 },
        { level: 3, energy: 5, progress: 4 },
        { level: 4, energy: 10, progress: 6 },
        { level: 5, energy: 17, progress: 8 },
        { level: 6, energy: 26, progress: 11 },
        { level: 7, energy: 38, progress: 14 },
        { level: 8, energy: 53, progress: 17 },
        { level: 9, energy: 71, progress: 20 },
        { level: 10, energy: 92, progress: 23 },
        { level: 11, energy: 116, progress: 27 },
        { level: 12, energy: 144, progress: 31 },
        { level: 13, energy: 176, progress: 35 },
        { level: 14, energy: 212, progress: 39 },
        { level: 15, energy: 252, progress: 44 },
        { level: 16, energy: 297, progress: 51 },
        { level: 17, energy: 349, progress: 60 },
        { level: 18, energy: 410, progress: 71 },
        { level: 19, energy: 482, progress: 87 },
        { level: 20, energy: 570, progress: 0 }
    ];

    // 获取DOM元素
    var WeaponUpgradeTable = document.getElementById('WeaponUpgradeCalculator');
    var WeaponUpgradeRemaining = document.getElementById('WeaponUpgradeRemaining');

    // 添加表头
    var headerRow = document.createElement('tr');

    var headerLevel = document.createElement('th');
    headerLevel.textContent = '';
    headerRow.appendChild(headerLevel);

    var headerLevel = document.createElement('th');
    headerLevel.textContent = '等级';
    headerRow.appendChild(headerLevel);

    var headerExp = document.createElement('th');
    headerExp.textContent = '经验';
    headerRow.appendChild(headerExp);

    WeaponUpgradeTable.appendChild(headerRow);

    // 动态生成行
    for (var i = 0; i < 6; i++) {
        var row = document.createElement('tr');

        var prefixText = document.createElement('td');
        prefixText.textContent = i === 0 ? '神器：' : '材料：';
        prefixText.classList.add('WeaponUpgradeAlignRight');
        row.appendChild(prefixText);

        var levelCell = document.createElement('td');
        levelCell.style.padding = '0';
        var levelSelect = document.createElement('select');
        levelSelect.addEventListener('change', WeaponUpgradeUpdateCalculation);
        levelCell.appendChild(levelSelect);
        row.appendChild(levelCell);

        var progressCell = document.createElement('td');
        progressCell.style.padding = '0';
        progressCell.classList.add('align-right');
        var progressInput = document.createElement('input');
        progressInput.type = 'number';
        progressInput.min = 0;
        progressInput.max = 0;
        progressInput.value = 0;
        progressInput.addEventListener('input', WeaponUpgradeUpdateCalculation);
        progressInput.style.width = '50px'; // 设置输入框的宽度
        progressCell.appendChild(progressInput);
        row.appendChild(progressCell);

        var errorText = document.createElement('span');
        row.appendChild(errorText);

        WeaponUpgradeTable.appendChild(row);

        for (var j = 0; j < WeaponUpgradeData.length; j++) {
            var option = document.createElement('option');
            option.value = WeaponUpgradeData[j].level;
            option.text = '等级 ' + WeaponUpgradeData[j].level;
            levelSelect.appendChild(option);
        }
    }

    // 更新计算
    function WeaponUpgradeUpdateCalculation() {
        var totalEnergy = 0;
        var rows = WeaponUpgradeTable.getElementsByTagName('tr');
        for (var i = 1; i < rows.length; i++) {
            var levelSelect = rows[i].children[1].firstChild;
            var progressInput = rows[i].children[2].firstChild;
            var errorText = rows[i].children[3];

            var level = levelSelect.value;
            var progress = progressInput.value;

            var energy = WeaponUpgradeData.find(function (item) { return item.level == level; }).energy;
            var maxProgress = WeaponUpgradeData.find(function (item) { return item.level == level; }).progress;

            progressInput.max = maxProgress;

            if (progress > maxProgress) {
                errorText.textContent = '超出当前神器最大经验值';
            } else {
                errorText.textContent = '';
                totalEnergy += energy + parseInt(progress);
            }
        }

        var remainingEnergy = 570 - totalEnergy;
        WeaponUpgradeRemaining.textContent = '距离20级神器还差：' + remainingEnergy + ' 个1级神器';
    }

    // 初始更新
    WeaponUpgradeUpdateCalculation();
</script>

<!-- 宝石计算 -->
<script>
    var data = [
        { start: 1, end: 2, gold: 5 },
        { start: 2, end: 3, gold: 10 },
        { start: 3, end: 4, gold: 20 },
        { start: 4, end: 5, gold: 40 },
        { start: 5, end: 6, gold: 300 },
        { start: 6, end: 7, gold: 600 },
        { start: 7, end: 8, gold: 1200 },
        { start: 8, end: 9, gold: 1800 },
        { start: 9, end: 10, gold: 2400 },
        { start: 10, end: 11, gold: 3000 },
        { start: 11, end: 12, gold: 4000 },
        { start: 12, end: 13, gold: 5000 },
        { start: 13, end: 14, gold: 6000 },
        { start: 14, end: 15, gold: 8000 }
    ];

    function calculate() {
        var start = parseInt(document.getElementById('start').value);
        var end = parseInt(document.getElementById('end').value);
        var sum = 0;
        for (var i = 0; i < data.length; i++) {
            if (data[i].start >= start && data[i].end <= end) {
                sum += data[i].gold;
            }
        }
        document.getElementById('result').innerHTML = "所需金币: " + sum + " 万";
    }
</script>


</html>